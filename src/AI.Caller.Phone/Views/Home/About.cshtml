@{
    ViewData["Title"] = "关于";
}

<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0"><i class="bi bi-info-circle"></i> 关于 AI.Caller</h4>
                </div>
                <div class="card-body">
                    <h5>项目介绍</h5>
                    <p>
                        AI.Caller 是一个现代化的 SIP 电话解决方案，集成了人工智能功能，支持通过 Web 界面进行电话呼叫、管理联系人和监控通话状态。
                    </p>
                    
                    <h5>主要功能</h5>
                    <ul>
                        <li>SIP 电话呼叫：支持标准 SIP 协议的语音通话</li>
                        <li>联系人管理：管理通话联系人信息</li>
                        <li>通话监控：实时监控通话状态和质量</li>
                        <li>通话录音：记录通话内容以供后续查阅</li>
                        <li>挂断检测：智能检测通话结束状态</li>
                        <li>网络监控：监控网络连接状态</li>
                        <li>用户认证：安全的用户登录系统</li>
                    </ul>
                    
                    <h5>技术架构</h5>
                    <ul>
                        <li>后端：.NET 8.0, ASP.NET Core MVC, Entity Framework Core</li>
                        <li>前端：HTML/CSS/JavaScript, Bootstrap 5, SignalR</li>
                        <li>数据库：SQLite</li>
                        <li>核心通信协议：SIP (使用 SIPSorcery 库)</li>
                        <li>媒体处理：FFmpeg</li>
                    </ul>
                    
                    <h5>使用说明</h5>
                    
                    <!-- 使用说明导航标签 -->
                    <ul class="nav nav-tabs" id="usageTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="user-management-tab" data-bs-toggle="tab" data-bs-target="#user-management" type="button" role="tab">
                                <i class="bi bi-people"></i> 用户管理
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="sip-config-tab" data-bs-toggle="tab" data-bs-target="#sip-config" type="button" role="tab">
                                <i class="bi bi-telephone"></i> SIP账户配置
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="multi-seat-tab" data-bs-toggle="tab" data-bs-target="#multi-seat" type="button" role="tab">
                                <i class="bi bi-diagram-3"></i> 多坐席配置
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="call-function-tab" data-bs-toggle="tab" data-bs-target="#call-function" type="button" role="tab">
                                <i class="bi bi-phone"></i> 通话功能
                            </button>
                        </li>
                    </ul>

                    <!-- 使用说明内容 -->
                    <div class="tab-content mt-3" id="usageTabContent">
                        <!-- 用户管理 -->
                        <div class="tab-pane fade show active" id="user-management" role="tabpanel">
                            <h6><i class="bi bi-people text-primary"></i> 用户管理</h6>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card border-primary mb-3">
                                        <div class="card-header">用户注册与登录</div>
                                        <div class="card-body">
                                            <h6>注册新用户</h6>
                                            <ol class="small">
                                                <li>访问系统首页，点击"注册"</li>
                                                <li>填写用户名和密码</li>
                                                <li>系统会自动创建用户账户</li>
                                            </ol>
                                            <h6>用户登录</h6>
                                            <ol class="small">
                                                <li>使用用户名和密码登录系统</li>
                                                <li>登录后可以访问个人功能和管理功能（如果是管理员）</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card border-info mb-3">
                                        <div class="card-header">用户类型</div>
                                        <div class="card-body">
                                            <div class="alert alert-info p-2 mb-2">
                                                <strong><i class="bi bi-person"></i> 普通用户</strong><br>
                                                <small>只能使用分配给自己的SIP账户进行通话</small>
                                            </div>
                                            <div class="alert alert-warning p-2">
                                                <strong><i class="bi bi-person-gear"></i> 管理员用户</strong><br>
                                                <small>可以管理所有用户和SIP账户，具有完整的系统管理权限</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- SIP账户配置 -->
                        <div class="tab-pane fade" id="sip-config" role="tabpanel">
                            <h6><i class="bi bi-telephone text-primary"></i> SIP账户配置</h6>
                            <div class="row">
                                <div class="col-md-8">
                                    <h6>添加SIP账户（管理员功能）</h6>
                                    <ol>
                                        <li>以管理员身份登录</li>
                                        <li>点击导航栏"管理" → "SIP账户管理"</li>
                                        <li>点击"添加SIP账户"按钮</li>
                                        <li>填写SIP账户信息</li>
                                    </ol>
                                    
                                    <h6>SIP账户信息说明</h6>
                                    <table class="table table-sm table-bordered">
                                        <thead class="table-light">
                                            <tr>
                                                <th>字段</th>
                                                <th>说明</th>
                                                <th>示例</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>SIP用户名</td>
                                                <td>SIP协议中的用户标识</td>
                                                <td>1001, agent01</td>
                                            </tr>
                                            <tr>
                                                <td>SIP密码</td>
                                                <td>SIP账户的认证密码</td>
                                                <td>password123</td>
                                            </tr>
                                            <tr>
                                                <td>SIP服务器</td>
                                                <td>SIP服务器的地址</td>
                                                <td>192.168.1.100</td>
                                            </tr>
                                            <tr>
                                                <td>状态</td>
                                                <td>账户是否激活</td>
                                                <td>激活/停用</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-md-4">
                                    <div class="card border-success">
                                        <div class="card-header bg-success">
                                            <h6 class="mb-0">配置示例</h6>
                                        </div>
                                        <div class="card-body">
                                            <pre class="p-2 rounded small">SIP用户名: 1001
SIP密码: mypassword
SIP服务器: 192.168.1.100
状态: 激活</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 多坐席配置 -->
                        <div class="tab-pane fade" id="multi-seat" role="tabpanel">
                            <h6><i class="bi bi-diagram-3 text-primary"></i> 多坐席配置</h6>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="card border-success mb-3">
                                        <div class="card-header bg-success text-white">
                                            <h6 class="mb-0">一对一模式</h6>
                                        </div>
                                        <div class="card-body">
                                            <p class="small">一个用户对应一个SIP账户</p>
                                            <p class="small"><strong>适用场景:</strong> 固定坐席</p>
                                            <hr>
                                            <small>
                                                <strong>配置步骤:</strong><br>
                                                1. 创建用户账户<br>
                                                2. 创建对应的SIP账户<br>
                                                3. 将SIP账户分配给用户
                                            </small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card border-warning mb-3">
                                        <div class="card-header bg-warning text-dark">
                                            <h6 class="mb-0">多用户共享模式</h6>
                                        </div>
                                        <div class="card-body">
                                            <p class="small">多个用户共享同一个SIP账户</p>
                                            <p class="small"><strong>适用场景:</strong> 轮班制坐席</p>
                                            <div class="alert alert-warning p-2">
                                                <small><strong>注意:</strong> 同一时间只能有一个用户使用该SIP账户</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card border-info mb-3">
                                        <div class="card-header bg-info text-white">
                                            <h6 class="mb-0">用户多账户模式</h6>
                                        </div>
                                        <div class="card-body">
                                            <p class="small">一个用户可以访问多个SIP账户</p>
                                            <p class="small"><strong>适用场景:</strong> 主管或技术支持</p>
                                            <hr>
                                            <small>用户可以在不同SIP账户间切换</small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <h6>分配SIP账户操作步骤</h6>
                            <div class="alert alert-light">
                                <ol class="small mb-0">
                                    <li>管理员登录系统</li>
                                    <li>点击"管理" → "用户管理"</li>
                                    <li>在用户列表中找到目标用户</li>
                                    <li>点击"分配SIP账户"按钮</li>
                                    <li>从下拉列表中选择可用的SIP账户</li>
                                    <li>点击"保存"完成分配</li>
                                </ol>
                            </div>
                        </div>

                        <!-- 通话功能 -->
                        <div class="tab-pane fade" id="call-function" role="tabpanel">
                            <h6><i class="bi bi-phone text-primary"></i> 通话功能</h6>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card border-primary mb-3">
                                        <div class="card-header">发起通话</div>
                                        <div class="card-body">
                                            <h6 class="card-title">通过通讯录拨打</h6>
                                            <ol class="small">
                                                <li>点击"通讯录"</li>
                                                <li>选择联系人</li>
                                                <li>点击"拨打"按钮</li>
                                            </ol>
                                            
                                            <h6 class="card-title">直接拨号</h6>
                                            <ol class="small">
                                                <li>在主页面的拨号区域输入电话号码</li>
                                                <li>点击"呼叫"按钮</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card border-success mb-3">
                                        <div class="card-header">通话控制</div>
                                        <div class="card-body">
                                            <ul class="list-unstyled small">
                                                <li><i class="bi bi-telephone-inbound text-success"></i> <strong>接听来电:</strong> 点击"接听"按钮</li>
                                                <li><i class="bi bi-telephone-x text-danger"></i> <strong>挂断通话:</strong> 点击"挂断"按钮</li>
                                                <li><i class="bi bi-pause-circle text-warning"></i> <strong>通话保持:</strong> 点击"保持"按钮（如果支持）</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <h6>常见问题排查</h6>
                            <div class="accordion accordion-flush" id="troubleshootAccordion">
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sipRegisterFail">
                                            SIP注册失败
                                        </button>
                                    </h2>
                                    <div id="sipRegisterFail" class="accordion-collapse collapse" data-bs-parent="#troubleshootAccordion">
                                        <div class="accordion-body">
                                            <div class="alert alert-danger p-2">
                                                <strong>症状:</strong> 用户显示"未注册"状态
                                            </div>
                                            <h6>解决方案:</h6>
                                            <ul class="small">
                                                <li>检查网络连接，确保可以访问SIP服务器</li>
                                                <li>验证SIP服务器地址是否正确</li>
                                                <li>检查SIP用户名和密码是否正确</li>
                                                <li>确保防火墙允许SIP端口（通常是5060）</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#cannotCall">
                                            无法发起通话
                                        </button>
                                    </h2>
                                    <div id="cannotCall" class="accordion-collapse collapse" data-bs-parent="#troubleshootAccordion">
                                        <div class="accordion-body">
                                            <div class="alert alert-warning p-2">
                                                <strong>症状:</strong> 点击呼叫按钮没有反应或提示错误
                                            </div>
                                            <h6>检查清单:</h6>
                                            <ul class="small">
                                                <li>确保用户已分配有效的SIP账户</li>
                                                <li>检查SIP账户状态是否为"激活"</li>
                                                <li>确认拨打的号码格式正确</li>
                                                <li>检查用户是否有拨打权限</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h5 class="mt-4">帮助和支持</h5>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-book text-primary"></i> 使用文档</h5>
                                    <p class="card-text">查看详细的使用说明和操作指南</p>
                                    <a href="#" class="btn btn-primary">查看文档</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-github text-dark"></i> 源码仓库</h5>
                                    <p class="card-text">访问 GitHub 仓库获取最新源码</p>
                                    <a href="#" class="btn btn-dark">访问 GitHub</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-bug text-danger"></i> 问题反馈</h5>
                                    <p class="card-text">报告问题或提交功能建议</p>
                                    <a href="#" class="btn btn-danger">提交问题</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-headset text-success"></i> 技术支持</h5>
                                    <p class="card-text">获取专业技术支持和咨询服务</p>
                                    <a href="#" class="btn btn-success">联系支持</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h5><i class="bi bi-info-circle"></i> 系统要求</h5>
                        <ul>
                            <li>支持现代浏览器（Chrome、Firefox、Safari、Edge等）</li>
                            <li>需要启用JavaScript和WebSocket支持</li>
                            <li>建议使用耳机或麦克风进行通话</li>
                            <li>需要稳定的网络连接</li>
                        </ul>
                    </div>
                </div>
                <div class="card-footer text-muted">
                    版本: 1.0.0
                </div>
            </div>
        </div>
    </div>
</div>