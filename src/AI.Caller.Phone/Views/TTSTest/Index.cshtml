<!DOCTYPE html>
<html>
<head>
    <title>TTS重采样测试</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2>🔊 TTS重采样测试</h2>

        <div class="alert alert-info">
            <h5>音频流测试</h5>
            <p>直接播放音频流，测试重采样是否有问题：</p>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h6>🎵 原始音频 (22050Hz)</h6>
                    </div>
                    <div class="card-body">
                        <p>TTS引擎直接输出的音频：</p>
                        <audio controls class="w-100 mb-3">
                            <source src="/TTSTest/OriginalAudio" type="audio/wav">
                            您的浏览器不支持音频播放
                        </audio>
                        <a href="/TTSTest/OriginalAudio" class="btn btn-outline-primary btn-sm" download>
                            📥 下载原始音频
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h6>🔄 重采样音频 (8000Hz)</h6>
                    </div>
                    <div class="card-body">
                        <p>重采样处理流程的音频：</p>
                        <audio controls class="w-100 mb-3">
                            <source src="/TTSTest/ResampledAudio" type="audio/wav">
                            您的浏览器不支持音频播放
                        </audio>
                        <a href="/TTSTest/ResampledAudio" class="btn btn-outline-success btn-sm" download>
                            📥 下载重采样音频
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h6>🔄 重采样音频 (8000Hz)</h6>
                    </div>
                    <div class="card-body">
                        <p>经过AI客服处理流程的音频：</p>
                        <audio controls class="w-100 mb-3">
                            <source src="/TTSTest/AIProcessedAudio" type="audio/wav">
                            您的浏览器不支持音频播放
                        </audio>
                        <a href="/TTSTest/AIProcessedAudio" class="btn btn-outline-success btn-sm" download>
                            📥 下载重采样音频
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h6>🔄 重采样音频 (8000Hz)</h6>
                    </div>
                    <div class="card-body">
                        <p>经过AI客服G711编码处理流程的音频：</p>
                        <audio controls class="w-100 mb-3">
                            <source src="/TTSTest/G711ProcessedAudio" type="audio/wav">
                            您的浏览器不支持音频播放
                        </audio>
                        <a href="/TTSTest/G711ProcessedAudio" class="btn btn-outline-success btn-sm" download>
                            📥 下载重采样音频
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header">
                <h6>📋 测试说明</h6>
            </div>
            <div class="card-body">
                <p><strong>测试流程：</strong></p>
                <ol>
                    <li><strong>原始音频</strong>：TTS引擎直接输出 (22050Hz)</li>
                    <li><strong>重采样音频</strong>：Float32 → PCM16 → 重采样到8000Hz</li>
                </ol>

                <p><strong>判断标准：</strong></p>
                <ul>
                    <li>✅ <strong>两个音频都能播放</strong> → 重采样正常，问题不在这里</li>
                    <li>⚠️ <strong>重采样音频音质明显变差</strong> → 重采样参数可能有问题</li>
                    <li>❌ <strong>重采样音频无法播放或没声音</strong> → 这就是AI TTS没声音的根本原因</li>
                </ul>

                <div class="alert alert-warning mt-3">
                    <small><strong>注意：</strong> 如果重采样音频加载失败或返回错误，说明重采样过程出现了问题。</small>
                </div>
            </div>
        </div>
    </div>
</body>
</html>